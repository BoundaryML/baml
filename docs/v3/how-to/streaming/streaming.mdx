---
title: "Streaming structured data"
---

### Streaming partial objects
The following returns an object that slowly gets filled in as the response comes in. This is useful if you want to start processing the response before it's fully complete.
You can stream anything from a `string` output type, to a complex object.

Example:
```
{"prop1": "hello"}
{"prop1": "hello how are you"}
{"prop1": "hello how are you", "prop2": "I'm good, how are you?"}
{"prop1": "hello how are you", "prop2": "I'm good, how are you?", "prop3": "I'm doing great, thanks for asking!"}
```

```python
async def main():
    async with baml.MyFunction.stream(MyInput(...)) as stream:
        async for output in stream.parsed_stream:
           
            if output.is_parseable:
              assert output.parsed.my_property is not None
              print("my property is present", output.parsed.my_property)
              print(f"streaming: {output.parsed.model_dump_json()}")
            
            # You can also get the current delta
            print(f"streaming: {output.delta}")

        final_output = await stream.get_final_response()
        if final_output.has_value:
            print(f"final response: {final_output.value}")
        else:
            # A deserialization error likely occurred.
            print(f"final resopnse didnt have a value")
```
You can also get the deltas from the `output` using `output.delta`

### Stream deltas only
The following returns a stream of deltas. This is useful if you want to process the response as it comes in, but don't want to deal with the object being partially filled in.

```python
async def main():
    async with baml.MyFunction.stream(MyInput(...)) as stream:
        async for chunk in stream.text_stream:
            print(f"streaming: {chunk.delta}")

        # You won't be able to do this if you're streaming deltas only. This will throw.
        # final_output = await stream.get_final_response()
```
<Warning>
You can't call `get_final_response()` if you're streaming deltas only. It will throw a ValueError.
</Warning>

### Stream a specific impl
The following returns a stream of a specific impl. This is useful if you want to process the response as it comes in, but don't want to deal with the object being partially filled in.

```python
async def main():
    async with baml.MyFunction.get_impl("v1").stream(...) as stream:
        async for chunk in stream.text_stream:
            print(f"streaming: {chunk.delta}")

        final_output = await stream.get_final_response()
```


### Caveats
1. Not available in TypeScript yet
2. Not supported for Fallback clients
3. Retry policies may not work correctly at the moment